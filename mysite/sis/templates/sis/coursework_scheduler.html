{% extends 'sis/base.html' %}


  {% load static %}
    {% block script %}
  <link rel='stylesheet' href={% static 'fullcalendar.css' %} />
  <script src={% static 'jquery.min.js' %}></script>
  <script src={% static 'moment.min.js' %}></script>
  <script src={% static 'fullcalendar.js' %}></script>
  <script src={% static 'Chart.js' %}></script>





  <script>
    $(document).ready(function() {


    // page is now ready, initialize the calendar...

    $('#calendar').fullCalendar({


      customButtons: {
        myCustomButton: {
          text: 'custom!',
          click: function(event) {
            event.color = 'blue';
          }
        }
      },
      header: {
        left: 'prev, next, today myCustomButton',
        center: 'title',
        right: 'month, agendaWeek, agendaDay'
      },

        // put your options and callbacks here
        // weekends: false,

        dayClick: function() {
          alert('a day has been clicked!');
        },





      events: [
      {% for dict in coursework_list %}
         {
           title  :   '{{dict.module_name}} - {{dict.title}}',
           start  :   '{{dict.start}}',
           end    :   '{{dict.end}}',
           {% if dict.percentage <= 10 %}
            color  : 'green',
          {% elif dict.percentage <= 20%}
            color  : 'blue',
          {% else %}
            color  : 'red',


           {% endif %}
           url: 'http://localhost:8000/coursework_details/{{dict.module_id}}/{{dict.id}}/'
         },
      {% endfor %}
     ]
    })

    $('#my-next-button').click(function(){
      $('#calendar').fullCalendar('next');
    })

    // function( isLoading, view )

    });



    </script>




    {% endblock %}


  {% block content %}
  <br>


  <div class="row">
    <div class="col-6">
      <div class="container" id='calendar'></div>
      <button id='my-next-button'>Next</button>
    </div>
      <div class="col-6 ">
          <div class="col-xs-4 text-center">

              <div class="col">  <h1>Coursework Priority<h1>


                 <!-- {% for module in modules_list %}
                         <h3>{{module}}</h3>
                       {% endfor %} -->
                       <button onclick="myFunction()">Bar</button>


                        <div id="myDIV">
                          <canvas id="myChart"></canvas>
                        </div>

          </div>

        </div>
      </div>
  </div>

  <script>

  function myFunction() {

    var x = document.getElementById("myDIV");
    if (x.style.display === "none") {
        x.style.display = "block";
    } else {
        x.style.display = "none";
    }
}

  var ctx = document.getElementById("myChart");
  var myChart = new Chart(ctx, {

      type: 'bar',
      data: {
          labels: [{% for label in graphlabel_list %} "{{label}}", {% endfor %}],
          datasets: [{
              label: 'Credits',
              data: {{graphdata_list}},
              backgroundColor: [
                {% for label in graphlabel_list %} 'rgba(153, 102, 255, 0.2)', {% endfor %}
                  // 'rgba(255, 99, 132, 0.2)',
                  // 'rgba(54, 162, 235, 0.2)',
                  // 'rgba(255, 206, 86, 0.2)',
                  // 'rgba(153, 102, 255, 0.2)',
                  // 'rgba(255, 159, 64, 0.2)'
              ],
              borderColor: [
                  {% for label in graphlabel_list %} 'rgba(75, 192, 192, 1)', {% endfor %}
                  // 'rgba(255,99,132,1)',
                  // 'rgba(54, 162, 235, 1)',
                  // 'rgba(255, 206, 86, 1)',
                  // 'rgba(75, 192, 192, 1)',
                  // 'rgba(153, 102, 255, 1)',
                  // 'rgba(255, 159, 64, 1)'
              ],
              borderWidth: 1
          }]
      },
      options: {
          scales: {
              yAxes: [{
                  ticks: {
                      beginAtZero:true
                  }
              }]
          },
          title: {
            display: true,
            text: 'Coursework completition priority'
        }

      }
  });




  </script>


  {% endblock %}
